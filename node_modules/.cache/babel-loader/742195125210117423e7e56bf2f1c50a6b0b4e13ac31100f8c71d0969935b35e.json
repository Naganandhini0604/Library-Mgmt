{"ast":null,"code":"'use strict';\n\nconst helpers = require('../../queryhelpers');\nconst immediate = require('../immediate');\nmodule.exports = completeMany;\n\n/*!\n * Given a model and an array of docs, hydrates all the docs to be instances\n * of the model. Used to initialize docs returned from the db from `find()`\n *\n * @param {Model} model\n * @param {Array} docs\n * @param {Object} fields the projection used, including `select` from schemas\n * @param {Object} userProvidedFields the user-specified projection\n * @param {Object} opts\n * @param {Array} [opts.populated]\n * @param {ClientSession} [opts.session]\n * @param {Function} callback\n */\n\nfunction completeMany(model, docs, fields, userProvidedFields, opts, callback) {\n  const arr = [];\n  let count = docs.length;\n  const len = count;\n  let error = null;\n  function init(_error) {\n    if (_error != null) {\n      error = error || _error;\n    }\n    if (error != null) {\n      --count || immediate(() => callback(error));\n      return;\n    }\n    --count || immediate(() => callback(error, arr));\n  }\n  for (let i = 0; i < len; ++i) {\n    arr[i] = helpers.createModel(model, docs[i], fields, userProvidedFields);\n    try {\n      arr[i].init(docs[i], opts, init);\n    } catch (error) {\n      init(error);\n    }\n    if (opts.session != null) {\n      arr[i].$session(opts.session);\n    }\n  }\n}","map":{"version":3,"names":["helpers","require","immediate","module","exports","completeMany","model","docs","fields","userProvidedFields","opts","callback","arr","count","length","len","error","init","_error","i","createModel","session","$session"],"sources":["/home/ctl/Documents/nodejs/node_modules/mongoose/lib/helpers/query/completeMany.js"],"sourcesContent":["'use strict';\n\nconst helpers = require('../../queryhelpers');\nconst immediate = require('../immediate');\n\nmodule.exports = completeMany;\n\n/*!\n * Given a model and an array of docs, hydrates all the docs to be instances\n * of the model. Used to initialize docs returned from the db from `find()`\n *\n * @param {Model} model\n * @param {Array} docs\n * @param {Object} fields the projection used, including `select` from schemas\n * @param {Object} userProvidedFields the user-specified projection\n * @param {Object} opts\n * @param {Array} [opts.populated]\n * @param {ClientSession} [opts.session]\n * @param {Function} callback\n */\n\nfunction completeMany(model, docs, fields, userProvidedFields, opts, callback) {\n  const arr = [];\n  let count = docs.length;\n  const len = count;\n  let error = null;\n\n  function init(_error) {\n    if (_error != null) {\n      error = error || _error;\n    }\n    if (error != null) {\n      --count || immediate(() => callback(error));\n      return;\n    }\n    --count || immediate(() => callback(error, arr));\n  }\n\n  for (let i = 0; i < len; ++i) {\n    arr[i] = helpers.createModel(model, docs[i], fields, userProvidedFields);\n    try {\n      arr[i].init(docs[i], opts, init);\n    } catch (error) {\n      init(error);\n    }\n\n    if (opts.session != null) {\n      arr[i].$session(opts.session);\n    }\n  }\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,OAAO,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAC7C,MAAMC,SAAS,GAAGD,OAAO,CAAC,cAAc,CAAC;AAEzCE,MAAM,CAACC,OAAO,GAAGC,YAAY;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,YAAY,CAACC,KAAK,EAAEC,IAAI,EAAEC,MAAM,EAAEC,kBAAkB,EAAEC,IAAI,EAAEC,QAAQ,EAAE;EAC7E,MAAMC,GAAG,GAAG,EAAE;EACd,IAAIC,KAAK,GAAGN,IAAI,CAACO,MAAM;EACvB,MAAMC,GAAG,GAAGF,KAAK;EACjB,IAAIG,KAAK,GAAG,IAAI;EAEhB,SAASC,IAAI,CAACC,MAAM,EAAE;IACpB,IAAIA,MAAM,IAAI,IAAI,EAAE;MAClBF,KAAK,GAAGA,KAAK,IAAIE,MAAM;IACzB;IACA,IAAIF,KAAK,IAAI,IAAI,EAAE;MACjB,EAAEH,KAAK,IAAIX,SAAS,CAAC,MAAMS,QAAQ,CAACK,KAAK,CAAC,CAAC;MAC3C;IACF;IACA,EAAEH,KAAK,IAAIX,SAAS,CAAC,MAAMS,QAAQ,CAACK,KAAK,EAAEJ,GAAG,CAAC,CAAC;EAClD;EAEA,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,GAAG,EAAE,EAAEI,CAAC,EAAE;IAC5BP,GAAG,CAACO,CAAC,CAAC,GAAGnB,OAAO,CAACoB,WAAW,CAACd,KAAK,EAAEC,IAAI,CAACY,CAAC,CAAC,EAAEX,MAAM,EAAEC,kBAAkB,CAAC;IACxE,IAAI;MACFG,GAAG,CAACO,CAAC,CAAC,CAACF,IAAI,CAACV,IAAI,CAACY,CAAC,CAAC,EAAET,IAAI,EAAEO,IAAI,CAAC;IAClC,CAAC,CAAC,OAAOD,KAAK,EAAE;MACdC,IAAI,CAACD,KAAK,CAAC;IACb;IAEA,IAAIN,IAAI,CAACW,OAAO,IAAI,IAAI,EAAE;MACxBT,GAAG,CAACO,CAAC,CAAC,CAACG,QAAQ,CAACZ,IAAI,CAACW,OAAO,CAAC;IAC/B;EACF;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}