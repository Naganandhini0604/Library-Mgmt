{"ast":null,"code":"'use strict';\n\n/**\n * Module dependencies\n */\nvar Collection = require('./collection');\nvar utils = require('../utils');\nfunction NodeCollection(col) {\n  this.collection = col;\n  this.collectionName = col.collectionName;\n}\n\n/**\n * inherit from collection base class\n */\n\nutils.inherits(NodeCollection, Collection);\n\n/**\n * find(match, options, function(err, docs))\n */\n\nNodeCollection.prototype.find = function (match, options, cb) {\n  this.collection.find(match, options, function (err, cursor) {\n    if (err) return cb(err);\n    try {\n      cursor.toArray(cb);\n    } catch (error) {\n      cb(error);\n    }\n  });\n};\n\n/**\n * findOne(match, options, function(err, doc))\n */\n\nNodeCollection.prototype.findOne = function (match, options, cb) {\n  this.collection.findOne(match, options, cb);\n};\n\n/**\n * count(match, options, function(err, count))\n */\n\nNodeCollection.prototype.count = function (match, options, cb) {\n  this.collection.count(match, options, cb);\n};\n\n/**\n * distinct(prop, match, options, function(err, count))\n */\n\nNodeCollection.prototype.distinct = function (prop, match, options, cb) {\n  this.collection.distinct(prop, match, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.update = function (match, update, options, cb) {\n  this.collection.update(match, update, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.updateMany = function (match, update, options, cb) {\n  this.collection.updateMany(match, update, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.updateOne = function (match, update, options, cb) {\n  this.collection.updateOne(match, update, options, cb);\n};\n\n/**\n * replaceOne(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.replaceOne = function (match, update, options, cb) {\n  this.collection.replaceOne(match, update, options, cb);\n};\n\n/**\n * deleteOne(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.deleteOne = function (match, options, cb) {\n  this.collection.deleteOne(match, options, cb);\n};\n\n/**\n * deleteMany(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.deleteMany = function (match, options, cb) {\n  this.collection.deleteMany(match, options, cb);\n};\n\n/**\n * remove(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.remove = function (match, options, cb) {\n  this.collection.remove(match, options, cb);\n};\n\n/**\n * findAndModify(match, update, options, function(err, doc))\n */\n\nNodeCollection.prototype.findAndModify = function (match, update, options, cb) {\n  var sort = Array.isArray(options.sort) ? options.sort : [];\n  this.collection.findAndModify(match, sort, update, options, cb);\n};\n\n/**\n * var stream = findStream(match, findOptions, streamOptions)\n */\n\nNodeCollection.prototype.findStream = function (match, findOptions, streamOptions) {\n  return this.collection.find(match, findOptions).stream(streamOptions);\n};\n\n/**\n * var cursor = findCursor(match, findOptions)\n */\n\nNodeCollection.prototype.findCursor = function (match, findOptions) {\n  return this.collection.find(match, findOptions);\n};\n\n/**\n * aggregation(operators..., function(err, doc))\n * TODO\n */\n\n/**\n * Expose\n */\n\nmodule.exports = exports = NodeCollection;","map":{"version":3,"names":["Collection","require","utils","NodeCollection","col","collection","collectionName","inherits","prototype","find","match","options","cb","err","cursor","toArray","error","findOne","count","distinct","prop","update","updateMany","updateOne","replaceOne","deleteOne","deleteMany","remove","findAndModify","sort","Array","isArray","findStream","findOptions","streamOptions","stream","findCursor","module","exports"],"sources":["/home/ctl/Documents/nodejs/node_modules/mquery/lib/collection/node.js"],"sourcesContent":["'use strict';\n\n/**\n * Module dependencies\n */\n\nvar Collection = require('./collection');\nvar utils = require('../utils');\n\nfunction NodeCollection(col) {\n  this.collection = col;\n  this.collectionName = col.collectionName;\n}\n\n/**\n * inherit from collection base class\n */\n\nutils.inherits(NodeCollection, Collection);\n\n/**\n * find(match, options, function(err, docs))\n */\n\nNodeCollection.prototype.find = function(match, options, cb) {\n  this.collection.find(match, options, function(err, cursor) {\n    if (err) return cb(err);\n\n    try {\n      cursor.toArray(cb);\n    } catch (error) {\n      cb(error);\n    }\n  });\n};\n\n/**\n * findOne(match, options, function(err, doc))\n */\n\nNodeCollection.prototype.findOne = function(match, options, cb) {\n  this.collection.findOne(match, options, cb);\n};\n\n/**\n * count(match, options, function(err, count))\n */\n\nNodeCollection.prototype.count = function(match, options, cb) {\n  this.collection.count(match, options, cb);\n};\n\n/**\n * distinct(prop, match, options, function(err, count))\n */\n\nNodeCollection.prototype.distinct = function(prop, match, options, cb) {\n  this.collection.distinct(prop, match, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.update = function(match, update, options, cb) {\n  this.collection.update(match, update, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.updateMany = function(match, update, options, cb) {\n  this.collection.updateMany(match, update, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.updateOne = function(match, update, options, cb) {\n  this.collection.updateOne(match, update, options, cb);\n};\n\n/**\n * replaceOne(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.replaceOne = function(match, update, options, cb) {\n  this.collection.replaceOne(match, update, options, cb);\n};\n\n/**\n * deleteOne(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.deleteOne = function(match, options, cb) {\n  this.collection.deleteOne(match, options, cb);\n};\n\n/**\n * deleteMany(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.deleteMany = function(match, options, cb) {\n  this.collection.deleteMany(match, options, cb);\n};\n\n/**\n * remove(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.remove = function(match, options, cb) {\n  this.collection.remove(match, options, cb);\n};\n\n/**\n * findAndModify(match, update, options, function(err, doc))\n */\n\nNodeCollection.prototype.findAndModify = function(match, update, options, cb) {\n  var sort = Array.isArray(options.sort) ? options.sort : [];\n  this.collection.findAndModify(match, sort, update, options, cb);\n};\n\n/**\n * var stream = findStream(match, findOptions, streamOptions)\n */\n\nNodeCollection.prototype.findStream = function(match, findOptions, streamOptions) {\n  return this.collection.find(match, findOptions).stream(streamOptions);\n};\n\n/**\n * var cursor = findCursor(match, findOptions)\n */\n\nNodeCollection.prototype.findCursor = function(match, findOptions) {\n  return this.collection.find(match, findOptions);\n};\n\n/**\n * aggregation(operators..., function(err, doc))\n * TODO\n */\n\n/**\n * Expose\n */\n\nmodule.exports = exports = NodeCollection;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}