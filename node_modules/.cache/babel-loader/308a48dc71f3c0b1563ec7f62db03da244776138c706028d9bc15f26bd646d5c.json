{"ast":null,"code":"'use strict';\n\n/*!\n * ignore\n */\nmodule.exports = function cleanModifiedSubpaths(doc, path, options) {\n  options = options || {};\n  const skipDocArrays = options.skipDocArrays;\n  let deleted = 0;\n  if (!doc) {\n    return deleted;\n  }\n  for (const modifiedPath of Object.keys(doc.$__.activePaths.states.modify)) {\n    if (skipDocArrays) {\n      const schemaType = doc.$__schema.path(modifiedPath);\n      if (schemaType && schemaType.$isMongooseDocumentArray) {\n        continue;\n      }\n    }\n    if (modifiedPath.startsWith(path + '.')) {\n      delete doc.$__.activePaths.states.modify[modifiedPath];\n      ++deleted;\n    }\n  }\n  return deleted;\n};","map":{"version":3,"names":["module","exports","cleanModifiedSubpaths","doc","path","options","skipDocArrays","deleted","modifiedPath","Object","keys","$__","activePaths","states","modify","schemaType","$__schema","$isMongooseDocumentArray","startsWith"],"sources":["/home/ctl/Documents/nodejs/node_modules/mongoose/lib/helpers/document/cleanModifiedSubpaths.js"],"sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = function cleanModifiedSubpaths(doc, path, options) {\n  options = options || {};\n  const skipDocArrays = options.skipDocArrays;\n\n  let deleted = 0;\n  if (!doc) {\n    return deleted;\n  }\n  for (const modifiedPath of Object.keys(doc.$__.activePaths.states.modify)) {\n    if (skipDocArrays) {\n      const schemaType = doc.$__schema.path(modifiedPath);\n      if (schemaType && schemaType.$isMongooseDocumentArray) {\n        continue;\n      }\n    }\n    if (modifiedPath.startsWith(path + '.')) {\n      delete doc.$__.activePaths.states.modify[modifiedPath];\n      ++deleted;\n    }\n  }\n  return deleted;\n};\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AACA;AAEAA,MAAM,CAACC,OAAO,GAAG,SAASC,qBAAqB,CAACC,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAE;EAClEA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,MAAMC,aAAa,GAAGD,OAAO,CAACC,aAAa;EAE3C,IAAIC,OAAO,GAAG,CAAC;EACf,IAAI,CAACJ,GAAG,EAAE;IACR,OAAOI,OAAO;EAChB;EACA,KAAK,MAAMC,YAAY,IAAIC,MAAM,CAACC,IAAI,CAACP,GAAG,CAACQ,GAAG,CAACC,WAAW,CAACC,MAAM,CAACC,MAAM,CAAC,EAAE;IACzE,IAAIR,aAAa,EAAE;MACjB,MAAMS,UAAU,GAAGZ,GAAG,CAACa,SAAS,CAACZ,IAAI,CAACI,YAAY,CAAC;MACnD,IAAIO,UAAU,IAAIA,UAAU,CAACE,wBAAwB,EAAE;QACrD;MACF;IACF;IACA,IAAIT,YAAY,CAACU,UAAU,CAACd,IAAI,GAAG,GAAG,CAAC,EAAE;MACvC,OAAOD,GAAG,CAACQ,GAAG,CAACC,WAAW,CAACC,MAAM,CAACC,MAAM,CAACN,YAAY,CAAC;MACtD,EAAED,OAAO;IACX;EACF;EACA,OAAOA,OAAO;AAChB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}